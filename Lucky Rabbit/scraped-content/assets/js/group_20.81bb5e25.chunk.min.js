"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[5433],{59062:(e,t,o)=>{o.r(t),o.d(t,{LightboxSymbol:()=>n.KK,LightboxUtilsSymbol:()=>n.By,name:()=>n.UU,page:()=>F,site:()=>B});var n=o(45117),i=o(32166),a=o(12482),r=o(16537),p=o(77748),g=o(20590),s=o(75396),u=o(32777),d=o(10553),l=o(87711),c=o(82658),h=o(98323),b=o(66084),m=o(84448),x=o(51360),P=o(79460);const L={},I=(0,p.Og)([b.SB,i.RV,(0,p.KT)(g.wk,n.UU),(0,p.KT)(g.YG,n.UU),(0,p.KT)(g._K,n.UU),b.re,m.W,s.t7,n.J9,h.j,n.Q9,n.Xd,u.F,P.q,d.n,l.eZ],(({initPage:e},t,o,{prefixToRouterFetchData:n,pageIdToPrefix:i},a,p,g,s,u,d,l,{handleResponse:h},b,{getFetchParams:m},P,I)=>{const v=[],T=[];let O,U=null;const y=t?.document.querySelector("#site-root"),f=e=>{"Escape"===e.key&&R()},R=async()=>{const e=K();if(!e)return;const{pendingLightboxId:n}=o.get()||{},i=n&&n!==e,a=U,g=await p(e,e),s=await g.getAllImplementersOfAsync(r.$.PageWillUnmountHandler);if(await Promise.all(s.map((t=>t.pageWillUnmount({pageId:e,contextId:e})))),l.removeLightboxFromDynamicStructure(e),a?.(),T.forEach((e=>e?.())),i)return;d.disableCyclicTabbing(e),P["specs.thunderbolt.screen_reader_focus"]&&y?.removeAttribute("aria-hidden"),(0,c.fU)(t)||t.removeEventListener("keydown",f);const h=u.isDuringReopen()?K():void 0;o.update((e=>({...e,pageWillLoadHandler:null,currentLightboxId:h,pendingLightboxId:void 0,lightboxRouteData:void 0})))},K=()=>o.get()?o.get().currentLightboxId:void 0,S=async(a,r,p,T)=>{L[a]={lightboxViewerContext:p};const O=i[a],K=n[O];if(K){const{url:e,options:t}=m(x.U.Lightboxes,K,{lightboxId:a,dynamicPageIdOverride:T}),{pageId:o}=await h(b.envFetch(e,t));a=o??a}if((e=>{if(u.isDuringReopen())return!1;const t=o.get();return t?.currentLightboxId===e||t?.pendingLightboxId===e})(a))return void(U=U||r);o.update((e=>({...e,pendingLightboxId:a}))),d.enableCyclicTabbing(a),P["specs.thunderbolt.screen_reader_focus"]&&y?.setAttribute("aria-hidden","true");const S=!s.isLandingOnProtectedPage();if(S&&(g.startNavigation(!0),g.setShouldBlockRender(!0)),await e({pageId:a,contextId:a,isLightbox:!0}),P["specs.thunderbolt.preventAddingPopupsRootIfLightboxIsNotInStructure"]&&!I.get(a))return S&&g.setShouldBlockRender(!1),void(S&&g.endNavigation());U=r,v.length>0&&v.forEach((e=>{e&&e(a)})),(0,c.fU)(t)||t.addEventListener("keydown",f),S&&g.setShouldBlockRender(!1),await l.addLightboxToDynamicStructure(a),o.update((e=>({...e,pageWillLoadHandler:R,currentLightboxId:a}))),S&&g.endNavigation()};return{isLightbox:e=>a.popupPages[e],open(e,t=null,n,i){const a=(o.get()?.pendingLightboxPromise||Promise.resolve()).then((()=>S(e,t,n,i)));return o.update((e=>({...e,pendingLightboxPromise:a}))),a},close:R,getContext:e=>L[e]?.lightboxViewerContext,registerToLightboxEvent(e,o){switch(e){case"popupScroll":O=o;const e=t.document.getElementById("POPUPS_ROOT"),n=e?.querySelector('div[class*="overflow-wrapper"]'),i=a.isResponsive&&n||e;i&&i.addEventListener("scroll",O);break;case"popupOpen":v.push(o);break;case"popupClose":T.push(o)}},getCurrentLightboxId:K,isOpen:()=>!!K()}})),v=(0,p.Og)([],(()=>({isDuringReopen:()=>!1}))),T=(0,p.Og)([(0,p.KT)(g.wk,"lightbox"),m.W,s.t7],((e,t,o)=>({name:"popupsPageNavigationHandler",appWillLoadPage:()=>{t.isFirstNavigation()&&!o.isLandingOnProtectedPage()&&e.update((e=>({...e,pendingLightboxPromise:t.waitForNavigationEnd()}))),e.get()?.pageWillLoadHandler?.()}})));var O=o(85740),U=o(71085);const y=["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"],f=(e,t)=>{const o=((e,t)=>{if(t){const t=e.getAttribute("href");return(0,O.M$)(t||"")}return e.getAttribute("data-anchor")||""})(e,t);return y.includes(o)},R=(0,p.Og)([n.KK,U.$1,d.n,(0,p.KT)(g.YG,n.UU)],((e,t,o,{isBuilderComponentModel:i})=>({handlerId:n.UU,handleClick:o=>{const n=((e,t)=>{if(t){const t=e.getAttribute("href");return(0,O.d6)(t||"","popup")}return e.getAttribute("data-popupid")})(o,i);if(n)return e.open(n),!0;const a=t.getFullUrlWithoutQueryParams(),r=!!e.getCurrentLightboxId(),p=o.getAttribute("href"),g=p&&(0,O.b7)(p),s=(0,O.b5)(a)===(0,O.b5)(g||""),u=f(o,i),d="_blank"===o.getAttribute("target");return r&&(s||u)&&!d&&e.close(),!1}})));var K=o(66225);const S=(0,p.Og)([n.KK,K.T],((e,t)=>({componentTypes:["PopupCloseIconButton"],componentWillMount(o){t.register(o.id,"onClick",e.close)}}))),C=(0,p.Og)([(0,p.KT)(g.Gp,n.UU),n.KK,K.T],(({closeSiteButtons:e},t,o)=>({componentTypes:["SiteButton"],componentWillMount(n){e[n.id]&&o.register(n.id,"onClick",t.close)}}))),w=(0,p.Og)([(0,p.KT)(g.Gp,n.UU),n.KK,K.T],(({popupsWithCloseOnOverlayClick:e},t,o)=>({componentTypes:["PopupPage","ResponsivePopupPage"],componentWillMount(n){e[n.id]&&o.register(n.id,"onClick",t.close)}}))),_=(0,p.Og)([(0,p.KT)(g._K,n.UU),(0,p.KT)(g.wk,n.UU)],((e,t)=>({isLightbox:t=>e.popupPages[t],getCurrentLightboxId:()=>t.get()?.pendingLightboxId||t.get()?.currentLightboxId,getLightboxPages:()=>e.popupPages,getLightboxRouteData:()=>t.get()?.lightboxRouteData}))),D=(0,p.Og)([n.By,d.n],(e=>({platformEnvData:()=>({popups:{popupPages:e.getLightboxPages(),lightboxRouteData:e.getLightboxRouteData()}})})));var k=o(20636);const W=(0,p.Og)([l.eZ,(0,p.KT)(g._K,n.UU),(0,p.KT)(g.AF,n.UU),l.Ji,s.hT],((e,t,o,n,i)=>({addLightboxToDynamicStructure:a=>{const r=e.getPageWrapperComponentId(a,a);return function({structureAPI:e,lightboxPageId:t,propsStore:o,pagesMap:n}){const i=e.getPopupContainerId(t),a=null!=i?o.get(i):null,r=a?.ariaLabel||n.getPageById(t)?.title;o.update({POPUPS_ROOT:{ariaLabel:r}})}({structureAPI:e,lightboxPageId:a,propsStore:n,pagesMap:i}),o.export({lightboxPageId:a}),e.addComponentToDynamicStructure("POPUPS_ROOT",{componentType:"PopupRoot",components:[r],uiType:t.isResponsive?"Responsive":"Classic"},{[r]:{componentType:"PageMountUnmount",components:[a]}})},removeLightboxFromDynamicStructure:t=>{const n=e.getPageWrapperComponentId(t,t);e.removeComponentFromDynamicStructure(n),e.removeComponentFromDynamicStructure("POPUPS_ROOT"),o.export({lightboxPageId:void 0})}}))),A=(0,p.Og)([(0,p.KT)(g.wk,n.UU)],(e=>({handleResponse:async t=>t.then((async t=>{if(!t.ok)throw t;const{result:o}=await t.json(),{page:n,data:i,head:a,publicData:r}=o,p={publicData:r,pageHeadData:a,pageData:i};return e.update((e=>({...e,lightboxRouteData:p}))),{pageId:n||null}})).catch((()=>({pageId:null})))}))),B=e=>{e(n.J9).to(v),e(n.KK).to(I),e(i.ew).to(D),e(n.By).to(_),e(a.y7).to(R),e(r.$.AppWillLoadPageHandler).to(T),e(n.Q9).to(W),e(n.Xd).to(A)},F=e=>{e(k.ls).to(S),e(k.ls).to(C),e(k.ls).to(w)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/group_20.81bb5e25.chunk.min.js.map