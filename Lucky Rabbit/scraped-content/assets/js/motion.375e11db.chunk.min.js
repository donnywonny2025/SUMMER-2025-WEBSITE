"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[3909],{85993:(e,t,n)=>{n.r(t),n.d(t,{AnimationManager:()=>f,MotionSymbol:()=>d.h,animationApiFactory:()=>_,name:()=>d.U,page:()=>D});var i=n(77748),s=n(20590),r=n(39218),a=n(87711),o=n(32166),c=n(54157),l=n(10553),d=n(59058),u=n(82658),g=n(82634);class h{constructor(e,t){this.storageKey=e,this.browserWindow=t}getFromSession(){if(!this.browserWindow?.sessionStorage)return{};if(this.browserWindow.performance.getEntriesByType("navigation").some((e=>"reload"===e.type)))return{};try{const e=this.browserWindow.sessionStorage.getItem(this.storageKey);return e?JSON.parse(e):{}}catch{return{}}}saveToSession(e){if(this.browserWindow?.sessionStorage)try{this.browserWindow.sessionStorage.setItem(this.storageKey,JSON.stringify(e))}catch{return}}clearFromSession(){if(this.browserWindow?.sessionStorage)try{this.browserWindow.sessionStorage.removeItem(this.storageKey)}catch{return}}}class f{constructor(e,t,n,i){this.api=e,this.isResponsive=n.isResponsive,this.isReducedMotion=n.reducedMotion,this.useCSSTime=n.useCSSTime||!1,this.viewportManager=n.reducedMotion?null:t({manager:this}),this.animationData={},this.scrubManagers=[],this.scrubTriggers={},this.callbacks={},this.breakpointRanges=[],this.activeListeners=[],this.scrubUpdateRequest=null,this.breakpointChangeHandler=this._breakpointChangeHandler.bind(this),this.disabledPointerScenes={},this.browserWindow=i,this.useSessionStorage=n.useSessionStorage||!1,this.navigationSessionStorageManager=new h("wix-motion-played-animations",i),this.played=this.useSessionStorage?this.navigationSessionStorageManager.getFromSession():{}}wasPlayed(e){return!!this.played[e]}setAsPlayed(e){this.played[e]=!0,this.useSessionStorage&&this.navigationSessionStorageManager.saveToSession(this.played)}_clearPlayed(){this.played={},this.useSessionStorage&&this.navigationSessionStorageManager.clearFromSession()}init(e,t){this.animationData=e,this.breakpointRanges=t,this.scrubUpdateRequest=null,this._observeBreakpointChange()}addExternalAnimationData(e,t,n){Object.assign(this.animationData,e);const i=Object.keys(t).filter((e=>"pointer-move"!==t[e].trigger)).reduce(((e,n)=>(e[n]=t[n],e)),{});this.trigger({scrub:n?t:i})}trigger(e={},t){if(e.scrub)return void(t?(this.scrubTriggers=e.scrub,this.scrubUpdateRequest||(this.scrubUpdateRequest=setTimeout((()=>{this._updateScrubManagers(this.scrubTriggers,!0),this.scrubUpdateRequest=null}),0))):(Object.assign(this.scrubTriggers,e.scrub),this._updateScrubManagers(e.scrub)));const n=this.isResponsive?window.innerWidth:0;e.play?.length&&e.play.forEach((({effectId:e,targetId:t,toggle:i})=>{const s=this._getEffectVariationForCurrentBreakpoint(e,n);(s?.namedEffect||s?.customEffect)&&this._playAnimation(s,e,{targetId:t,toggle:i})})),e.resume?.length&&e.resume.forEach((({effectId:e,targetId:t})=>{if(this.disabledPointerScenes[e])return void this.disabledPointerScenes[e].forEach((e=>e.disabled=!1));const i=this._getEffectVariationForCurrentBreakpoint(e,n);(i?.namedEffect||i?.customEffect)&&this._resumeOrPlayAnimation(i,e,{targetId:t})})),e.hold?.length&&e.hold.forEach((({effectId:e,targetId:t})=>{if(this.disabledPointerScenes[e])return void this.disabledPointerScenes[e].forEach((e=>e.disabled=!0));const i=this._getEffectVariationForCurrentBreakpoint(e,n);(i?.namedEffect||i?.customEffect)&&this._pauseAnimation(t,i)}))}cancelAll(){this.api.cancelScrub(this.scrubManagers),this.api.cancelAll(),this.scrubTriggers={},this._clearPlayed(),this.clear()}clear(){this.animationData={},this.activeListeners.forEach((e=>e.removeEventListener("change",this.breakpointChangeHandler))),this.activeListeners.length=0,this.disabledPointerScenes={},this.viewportManager?.disconnect()}addEffectCallback(e,t,n){const i="animation-end"===t?"end":"start";this.callbacks[e]||(this.callbacks[e]={end:[],start:[]}),this.callbacks[e][i].push(n)}clearEffectCallbacks(e){delete this.callbacks[e]}_updateScrubManagers(e={},t=!1){this.scrubManagers.length&&t&&(this.scrubManagers.forEach((e=>e.destroy())),this.scrubManagers.length=0);const n=Object.keys(e),i=this.isResponsive?window.innerWidth:0,s={};for(const e of n){const t=this._getEffectVariationForCurrentBreakpoint(e,i);"ScrubAnimationOptions"===t?.type&&(s[e]=t)}this.scrubManagers.push(...this.api.startScrub(e,s)),this.scrubManagers.forEach((e=>{e instanceof g.g&&e.config.scenes.forEach((e=>{if(e.target&&e.centeredToTarget&&e.isHitAreaRoot){const t=e.target.closest("[data-block-level-container]"),n=e.effectId;t?this.viewportManager&&n&&(this.disabledPointerScenes[n]||(this.disabledPointerScenes[n]=[]),this.disabledPointerScenes[n].push(e),this.viewportManager.observe(t,{effectId:n,targetId:e.target.id})):e.disabled=!1}}))}))}_getEffectVariationForCurrentBreakpoint(e,t){const n=this.animationData[e];if(!n)return;const i=n.find((e=>!e.variants?.length));return t&&n.findLast((e=>e.variants?.some((e=>!(e.max&&e.max<t)&&!(e.min&&e.min>t)))))||i}_playAnimation(e,t,n={}){const i={...e,...n,effectId:t},{targetId:s,iterations:r,allowReplay:a}=i;if(0===r)return void this._setAnimationPlaystateTrigger(t,s);if("never"===a&&this.wasPlayed(s))return void this._setAnimationState(s);const o=this._getAnimationCallbacks(t,s,i);this.useCSSTime?this.api.playCSS(s,i,o):this.api.play(s,i,o),"never"===a&&this.setAsPlayed(s)}_resumeOrPlayAnimation(e,t,n={}){const i={...e,...n,effectId:t},s=i.targetId,r=this.api.getTargetAnimation(s,i),a=this._getAnimationCallbacks(t,s,i);r?r.play():this.api.play(s,i,a)}_pauseAnimation(e,t){const n=this.api.getTargetAnimation(e,t);n?.pause()}_setAnimationPlaystateTrigger(e,t){const n=document.getElementById(t);if(n&&this.viewportManager){const i=n.closest("[data-block-level-container]")||n;this.viewportManager.observe(i,{effectId:e,targetId:t})}}_observeBreakpointChange(){this.breakpointRanges.forEach((e=>{const t=m(e),n=window.matchMedia(t);this.activeListeners.push(n),n.addEventListener("change",this.breakpointChangeHandler)}))}_breakpointChangeHandler(e){e.matches&&(this.scrubUpdateRequest||(this.scrubUpdateRequest=setTimeout((()=>{this._updateScrubManagers(this.scrubTriggers,!0),this.scrubUpdateRequest=null}),0)))}_setAnimationState(e){const t=document.getElementById(e);t&&(t.dataset.motionEnter="done")}_getAnimationCallbacks(e,t,n){const i=[];return"backwards"!==n.fill&&"both"!==n.fill||i.push((()=>{this._setAnimationState(t)})),i.push(...this.callbacks[e]?.start||[]),{start:i,end:this.callbacks[e]?.end}}}const m=e=>{const t=[];return e.max&&t.push(`(max-width:${e.max}px)`),e.min&&t.push(`(min-width:${e.min}px)`),t.join(" and ")};var p=n(8242),b=n(49432);class v{constructor(e,t){(0,b.A)(this,"animations",void 0),(0,b.A)(this,"options",void 0),(0,b.A)(this,"ready",void 0),this.animations=e,this.options=t,this.ready=(null==t?void 0:t.measured)||Promise.resolve()}getProgress(){var e;return(null==(e=this.animations[0])||null==(e=e.effect)?void 0:e.getComputedTiming().progress)||0}async play(e){await this.ready;for(const e of this.animations)e.play();await Promise.all(this.animations.map((e=>e.ready))),e&&e()}pause(){for(const e of this.animations)e.pause()}async reverse(e){await this.ready;for(const e of this.animations)e.reverse();await Promise.all(this.animations.map((e=>e.ready))),e&&e()}progress(e){for(const t of this.animations){const{activeDuration:n}=t.effect.getComputedTiming(),{delay:i}=t.effect.getTiming();t.currentTime=((i||0)+(n||0))*e}}cancel(){for(const e of this.animations)e.cancel()}setPlaybackRate(e){for(const t of this.animations)t.playbackRate=e}async onFinish(e){try{await Promise.all(this.animations.map((e=>e.finished))),e()}catch(e){console.warn("animation was interrupted - aborting onFinish callback - ",e)}}get finished(){return Promise.all(this.animations.map((e=>e.finished)))}get playState(){var e;return null==(e=this.animations[0])?void 0:e.playState}}var y=n(73162),w=n(6315),S=n(17709),E=n.n(S);function A(e,t,n,i){if(e){let s;return n instanceof HTMLElement&&(s={measure:(0,w.xP)(n),mutate:(0,w.Tk)(n)}),"TimeAnimationOptions"===t.type&&(t.duration=t.duration||1),e.web?e.web(t,s,i):e(t,s,i)}return[]}function I(e,t,n,i,s){const r=e instanceof HTMLElement?e:(0,w.V6)(e,s);if("pointer-move"===(null==n?void 0:n.trigger)){let e=t;t.customEffect&&(e={...t,namedEffect:{id:"",type:"CustomMouse"}});return A((0,w.jx)(e),t,r,i)(r)}const a=A((0,w.jx)(t),t,r,i),o=(0,w.by)(a,t.effectId);let c;const l="view-progress"===(null==n?void 0:n.trigger);l&&window.ViewTimeline&&(c=new ViewTimeline({subject:n.element||(0,w.V6)(n.componentId)}));const d=o.map((e=>{let{effect:n,options:i,id:s,part:a}=e;const o=a?null==r?void 0:r.querySelector(`[data-motion-part~="${a}"]`):r,d=new KeyframeEffect(o||null,[],i);E().mutate((()=>{"timing"in n&&d.updateTiming(n.timing),d.setKeyframes(n.keyframes)}));const u=l&&c?new Animation(d,c):new Animation(d);if(l)if(c)E().mutate((()=>{const{start:e,end:t}=(0,w.Hz)(n);u.rangeStart=e,u.rangeEnd=t,u.play()}));else{const{startOffset:e,endOffset:i}=t;E().mutate((()=>{var t,s;const r=n.startOffset||e,a=n.endOffset||i;Object.assign(u,{start:{name:r.name,offset:null==(t=r.offset)?void 0:t.value,add:n.startOffsetAdd},end:{name:a.name,offset:null==(s=a.offset)?void 0:s.value,add:n.endOffsetAdd}})}))}return s&&(u.id=s),u}));return new v(d,{...t,trigger:{...n||{}},measured:new Promise((e=>E().mutate(e)))})}function T(e,t){const n=(0,w.jx)(t);if(!n)return null;if(!n.style)return t.effectId&&e?k(e,t.effectId):null;const i=n.getNames(t),s="string"==typeof e?(0,w.V6)(e):e,r=null==s?void 0:s.getAnimations(),a=(null==r?void 0:r.map((e=>e.animationName)))||[],o=[];return i.forEach((e=>{a.includes(e)&&o.push(null==r?void 0:r.find((t=>t.animationName===e)))})),null!=o&&o.length?new v(o):null}function k(e,t){const n="string"==typeof e?(0,w.V6)(e):e,i=null==n?void 0:n.getAnimations().filter((e=>{const n=e.id||e.animationName;return!n||n.startsWith(t)}));return null!=i&&i.length?new v(i):null}var M=n(789);function P(e){if(null==e)return window;const t=function(e){const t=window.getComputedStyle(e).overflowY;return"visible"!==t&&"clip"!==t}(e);return t?e:P(e.parentElement)}const _=(e,t)=>({getTargetAnimation:(e,t)=>T(e,t),play(e,t,n){if(t.toggle){const n=k(e,t.effectId);if(n)return n.reverse(),n}"reverse"===t.toggle&&(t={...t,reversed:!0});const i=I(e,t);let s;return t.registerCustomEffect&&t.registerCustomEffect(i.getProgress),n?.start?.length&&(s=()=>{n.start.forEach((e=>e()))}),n?.end?.length&&i.onFinish((()=>{n.end.forEach((e=>e()))})),i.play(s),i},playCSS(e,t,n){const i=document.getElementById(e),s=T(e,t);s&&(i.addEventListener("animationend",(()=>{n?.end?.length&&n.end.forEach((e=>e()))}),{once:!0}),function(e,t,n){const i=(0,w.jx)(t),s=e instanceof HTMLElement?e:(0,w.V6)(e);if(i&&i.prepare&&s){const e={measure:(0,w.xP)(s),mutate:(0,w.Tk)(s)};i.prepare(t,e)}n&&E().mutate(n)}(e,t,(()=>s.play((()=>{n?.start?.length&&n.start.forEach((e=>e()))})))))},cancelAll(){document.documentElement.getAnimations({subtree:!0}).forEach((e=>e.cancel()))},startScrub(e,t,n){const i=new Map,s=[],r=new Map,a=[],o="ViewTimeline"in window;function c(e,t,n){const s=e(n),r=Array.isArray(s)?s:[s];let a;o?a=document.documentElement:(r.forEach((e=>{e.viewSource||(e.viewSource=t),e.groupId=`${n}-${t.id||""}`})),a=P(t.parentElement)),i.has(a)||i.set(a,[]),i.get(a).push(...r)}function l(e,t,i,s,a){const o="root"===a.hitArea,c=e(i,o&&!n?.forceEnableScene),l={isHitAreaRoot:o,effectId:s,eventSource:n?.pointerSource,...c},d=o?document.documentElement:t;r.has(d)||r.set(d,[]),r.get(d).push(l)}return Object.entries(e).forEach((([e,n])=>{if(!t[e])return;const i="view-progress"===n.trigger,s="pointer-move"===n.trigger,{targetId:r,namedEffect:a,customEffect:o}=t[e];if((a||o)&&(s||i)){const s=document.getElementById(n.componentId);if(s){this._getScrubTargets(n.componentId,r).forEach((r=>{const a=this._createScrub(t[e],{...n,element:s});return i?c(a.factory,s,r):l(a.factory,s,r,e,n.params)}))}else{Array.from(document.querySelectorAll(`[id^="${n.componentId}${M.Jx}"]`)).forEach((s=>{const a=this._createScrub(t[e],{...n,element:s}),o=(0,M.Zr)((0,M.vC)(r),(0,M.D2)(s.id));i?c(a.factory,s,o):l(a.factory,s,o,e,n.params)}))}}})),i.forEach(((e,t)=>{if(e.length)if(o)s.push(...e);else{const n=new p.O({root:t,scenes:e,observeViewportEntry:!1,observeViewportResize:!1,observeSourcesResize:!1,observeContentResize:!0,contentRoot:document.querySelector("#site-root")});s.push(n),Promise.all(e.map((e=>e.ready||Promise.resolve()))).then((()=>{n.start()}))}})),r.forEach(((e,t)=>{const n=e.find((e=>e.transitionDuration)),i=n?.transitionDuration,s=n?.transitionEasing,r=e.find((e=>e.eventSource))?.eventSource,o=e.some((e=>e.allowActiveEvent)),c=new g.g({root:t===document.documentElement?void 0:t,scenes:e,transitionDuration:i,transitionEasing:s,eventSource:r,allowActiveEvent:o});c.start(),a.push(c)})),[...s,...a]},cancelScrub(e){e.length&&(e.forEach((e=>e.destroy())),e.length=0)},_createScrub:(e,t)=>({targetId:e.targetId,factory:(n,i=!1)=>{const s=function(e,t,n,i){void 0===i&&(i={});const{disabled:s,allowActiveEvent:r,...a}=i,o=I(e,t,n,a);let c={};if("view-progress"===n.trigger&&!window.ViewTimeline){const e=n.element||(0,w.V6)(n.componentId),{ready:t}=o;return o.animations.map((n=>({get start(){return n.start},get end(){return n.end},viewSource:e,ready:t,getProgress:()=>o.getProgress(),effect(e,t){const{activeDuration:i}=n.effect.getComputedTiming(),{delay:s}=n.effect.getTiming();n.currentTime=((s||0)+(i||0))*t},disabled:s,destroy(){n.cancel()}})))}if("pointer-move"===n.trigger){const{centeredToTarget:e,transitionDuration:n,transitionEasing:i}=t;c={target:o.target,centeredToTarget:e,allowActiveEvent:r},t.customEffect&&n&&(c.transitionDuration=n,c.transitionEasing=(0,y.lC)(i))}return{...c,getProgress:()=>o.getProgress(),effect(e,t,n,i){o.progress(n?{...t,v:n,active:i}:t)},disabled:s,destroy(){o.cancel()}}}(n||e.targetId,e,t,{disabled:i,ignoreScrollMoveOffsets:!0});return e.registerCustomEffect&&(Array.isArray(s)?e.registerCustomEffect(s[0].getProgress):(s.allowActiveEvent=!0,e.registerCustomEffect(s.getProgress))),s}}),_getScrubTargets(n,i){const s=e?.[i],{items:r=[]}=s&&t?t.get(s):{};return r.length?r.map((e=>(0,M.Zr)(i,e))):[i]}});function C({manager:e}){const t={entry:i((function(t){const i=t.filter((e=>{const{isIntersecting:t,target:i}=e;return t&&(n.get(i).isIntersecting=!0),t})).flatMap((e=>s(e.target)));e.trigger({resume:i})}),0,"10%"),exit:i((function(t){const i=t.filter((e=>{const{isIntersecting:t,target:i}=e;return t||(n.get(i).isIntersecting=!1),!t})).flatMap((e=>s(e.target)));e.trigger({hold:i})}),0,"50%")},n=new WeakMap;function i(e,t,n="0px"){const i={root:null,rootMargin:n,threshold:[t]};return new window.IntersectionObserver(e,i)}const s=e=>Array.from(n.get(e)?.effects||[]);return{observe:function(i,s){const r=n.get(i);r?(r.effects.add(s),r.isIntersecting&&e.trigger({resume:[s]})):(n.set(i,{effects:new Set([s]),isIntersecting:!1}),t.entry.observe(i),t.exit.observe(i))},disconnect:function(){t.entry.disconnect(),t.exit.disconnect()}}}const R=(0,i.Og)([(0,i.KT)(s.Gp,d.U),(0,i.KT)(s.wk,d.U),r.Is,a.Ji,o.RV,c.n,l.n],((e,t,n,i,s,r,a)=>{const{animationDataByCompId:o,scrubAnimationBreakpoints:c,repeaterTemplateToParentMap:l,isResponsive:d,useCSSTimeAnimations:g=!1}=e;if((0,u.fU)(s))return{name:"motion",async pageWillUnmount(){},getManager(){}};const h=_(l,i);let m=t.get()?.[n];if(!m){const e=!!a["specs.thunderbolt.motionSessionStorageReplay"];m=new f(h,C,{isResponsive:d,reducedMotion:r,useCSSTime:g,useSessionStorage:e},s),t.update((e=>({...e,[n]:m})))}const p=r?{}:Object.assign({},...Object.values(o||{}));return m.init(p,c),{name:"motion",async pageWillUnmount(){m?.clear()},getManager:()=>m}}));var O=n(16537),x=n(478),V=n(35406);const W=(0,i.Og)([d.h,x.e,o.RV,o.HW,c.n,V.Q],((e,t,n,i,s,r)=>({getSdkHandlers:()=>({[d.U]:{runAnimation:async(a,o)=>{const c=Array.isArray(a.targetId)?a.targetId:[a.targetId];return new Promise((async l=>{const d=e.getManager(),u=[];if(!d)return void l();const g=()=>{B(n,c),"in"===o&&t.update(c.reduce(((e,t)=>({...e,[t]:{visibility:null}})),{}))},h=()=>{"out"===o&&t.update(c.reduce(((e,t)=>({...e,[t]:{visibility:"hidden !important"}})),{})),U(n,c),setTimeout((()=>{u.forEach((e=>e.cancel())),u.length=0}),0)};if(await Promise.all([i,...c.map((e=>r.waitForComponentToRender((0,M.qO)(e))))]),s)return g(),h(),void l();a.fill="both",c.forEach((e=>{u.push(d.api.play(e,a,{start:[g],end:[h,l]}))}))}))}}})}))),B=(e,t)=>{t.forEach((t=>{const n=e.document.getElementById(t);n&&n.classList.add("is-animating")}))},U=(e,t)=>{e.requestAnimationFrame((()=>{t.forEach((t=>{const n=e.document.getElementById(t);n&&n.classList.remove("is-animating")}))}))},D=e=>{e(o.H9).to(W),e(O.$.PageWillUnmountHandler,d.h).to(R)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/motion.375e11db.chunk.min.js.map